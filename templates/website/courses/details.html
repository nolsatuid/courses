{% extends 'website/base-top-nav.html' %}

{% block content %}
<div class="row">

    <div class="col-md-8">
        <div class="card">
            {% if course.featured_image %}
                <img class="card-img-top" src="{{ course.featured_image.url }}" alt="{{ course.featured_image.name}}">
            {% endif %}
            <div class="card-body">
                <h1>{{ course.title }}</h1>
                <small><i class="fas fa-user-edit"></i> {{ course.author|capfirst }}</small>

                <nav class="mt-5">
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a class="nav-item nav-link active" id="nav-description-tab" data-toggle="tab" href="#nav-description" role="tab" aria-controls="nav-description" aria-selected="true">Deskripsi</a>
                      <a class="nav-item nav-link" id="nav-module-tab" data-toggle="tab" href="#nav-module" role="tab" aria-controls="nav-profile" aria-selected="false">Modul</a>
                    </div>
                  </nav>
                  <div class="tab-content pt-4" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-description" role="tabpanel" aria-labelledby="nav-description-tab">
                        {{ course.description|safe }}
                    </div>

                    <div class="tab-pane fade" id="nav-module" role="tabpanel" aria-labelledby="nav-module-tab">
                        <div class="">
                            <div class="card-header">
                              <h3 class="card-title">Daftar modul materi {{ course.title }}</h3>
                            </div>
                            <!-- /.card-header -->
                            <div class="card-body">
                              <div id="accordion">
                                <!-- we are adding the .class so bootstrap.js collapse plugin detects it -->
                                {% for module in course.modules.all %} 
                                    <div class="card">
                                    <div class="card-header">
                                        <h4 class="card-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse{{module.slug}}" class="text-dark" aria-expanded="true">
                                            Modul {{ module.title }}
                                        </a>
                                        </h4>
                                        {% if module.is_visible or user.is_superuser %} 
                                            <a href="{% url 'website:modules:preview' module.slug %}" class="float-right btn btn-xs btn-outline-info">
                                                Lihat Deskripsi
                                            </a>
                                        {% else %}
                                            <button class="float-right btn btn-xs btn-outline-secondary" disabled>
                                                Lihat Deskripsi
                                            </button>
                                        {% endif %}
                                    </div>
                                    <div id="collapse{{module.slug}}" class="panel-collapse in collapse show" style="">
                                        {% if module.sections.all %}
                                        <div class="card-body">
                                            <ol class="todo-list">
                                                {% for section in module.sections.all %}
                                                    <li>
                                                        {% if section.is_visible or user.is_superuser %} 
                                                            <a class="text-dark" href="{% url 'website:sections:preview' section.slug %}">{{ forloop.counter }}. {{ section.title }}
                                                                <i class="float-right fa fa-eye"></i>
                                                            </a>                                                            
                                                        {% else %}
                                                            {{ forloop.counter }}. {{ section.title }}
                                                            <i class="float-right fa fa-eye-slash"></i>
                                                        {% endif %}
                                                    </li>
                                                {% endfor %}
                                            </ol>
                                        </div>
                                        {% endif %}
                                    </div>
                                    </div>
                                {% endfor %}
                              </div>
                            </div>
                            <!-- /.card-body -->
                          </div>
                    </div>
                  </div>                
            </div>
        </div>
    </div>

    <div class="col-md-4">
        {% include 'partials/sidebar-content.html' %}
    </div>
</div>
  <!-- /.row -->
{% endblock %}